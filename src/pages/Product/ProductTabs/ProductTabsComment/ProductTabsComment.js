import React, {useState} from 'react';
import face from './face.png'
import {useForm} from "react-hook-form";
import {useDispatch, useSelector} from "react-redux";
import {db} from '../../../../../src/firebase/firebase';
import {doc, updateDoc} from "firebase/firestore";
import {useParams} from "react-router-dom";
import {collection, getDocs} from "@firebase/firestore";
import {getAllProducts} from "../../../../redux/reducers/products";

// const productData = ;

const ProductTabsComment = ({productName = ' Продукт'}) => {
    const params = useParams();
    const dispatch = useDispatch();
    const products = useSelector(s => s.products.products);
    const product = products?.filter(item => item.id === params.id)[0];
    const emptyStars = 0;
    const [overlay, setOverlay] = useState(false);
    const {
        register,
        handleSubmit,
        formState: {
            errors
        },
        reset
    } = useForm();
    const [stars, setStars] = useState(5);

    // console.log(product)

    const sendComment = (data) => {
        updateDoc(doc(db, "products", product.id), {
            ...product,
            comments: [
                ...product?.comments, {...data, stars, id: product.comments[product.comments.length - 1]?.id ?
                        product.comments[product.comments.length - 1].id + 1 : 1}
            ]
        });
        getDocs(collection(db, 'products'))
            .then((res) => dispatch(getAllProducts({arr: res.docs.map(el => ({...el.data(), id: el.id}))})));
        reset()
    };


    return (
        <div>
            <h2 className={'product__tabs-comment-title'}>Отзывы на {productName} </h2>

            <div className={'product__tabs-comment-bot'}>
                <div className={'product__tabs-comment-left'}>
                    {
                        overlay === true ?
                        <>
                            <div className={'formalize__overlay'} onClick={() => {
                                setOverlay(face)
                            }
                            }>
                                }>
                            </div>
                            <div className="formalize__popup">
                                <div className={'formalize__popup-close'} onClick={() => {
                                }}>
                                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none"
                                         xmlns="http://www.w3.org/2000/svg">
                                        <path fillRule="evenodd" clipRule="evenodd"
                                              d="M14.6838 12.5735C15.2491 13.179 15.2491 14.1608 14.6838 14.7663L14.3168 15.1593C13.7515 15.7648 12.8348 15.7648 12.2694 15.1593L8.00019 10.5868L3.73094 15.1593C3.16557 15.7648 2.24893 15.7648 1.68357 15.1593L1.31662 14.7663C0.75125 14.1608 0.751249 13.179 1.31662 12.5735L5.58587 8.00105L1.3166 3.4286C0.751236 2.82308 0.751237 1.84134 1.3166 1.23582L1.68355 0.842811C2.24892 0.237293 3.16556 0.237292 3.73093 0.84281L8.00019 5.41527L12.2695 0.84281C12.8348 0.237292 13.7515 0.237293 14.3168 0.842811L14.6838 1.23582C15.2492 1.84134 15.2492 2.82308 14.6838 3.4286L10.4145 8.00105L14.6838 12.5735Z"
                                              fill="#00C65E"/>
                                    </svg>

                                </div>
                                <h2 className="product__tabs-comment__popup-title" >Оставить отзыв </h2>
                                <div className={'product__tabs-comment__popup-stars'}>{stars}

                                    <span onClick={() => setStars(1)}>
                                        {stars >= 1 ?
                                                <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                    <path d="M10.6913 1.06712C11.163 -0.355708 13.2114 -0.355708 13.6815 1.06712L15.3636 6.15286C15.4664 6.46259 15.6662 6.73246 15.9344 6.92391C16.2027 7.11536 16.5256 7.21858 16.8571 7.21882H22.2998C23.8232 7.21882 24.4552 9.13447 23.2242 10.015L18.8223 13.1573C18.5535 13.3489 18.3534 13.6193 18.2506 13.9295C18.1478 14.2398 18.1476 14.5741 18.25 14.8845L19.9322 19.9702C20.4038 21.3931 18.7453 22.578 17.5111 21.6974L13.1092 18.5551C12.8407 18.3636 12.5174 18.2604 12.1856 18.2604C11.8538 18.2604 11.5305 18.3636 11.262 18.5551L6.86009 21.6974C5.62755 22.578 3.97054 21.3931 4.44061 19.9702L6.12277 14.8845C6.22523 14.5741 6.22504 14.2398 6.12224 13.9295C6.01944 13.6193 5.8193 13.3489 5.55052 13.1573L1.15018 10.0166C-0.0807888 9.13601 0.552773 7.22037 2.07458 7.22037H7.51566C7.84745 7.22045 8.17076 7.11738 8.43931 6.92591C8.70786 6.73444 8.90788 6.46438 9.01074 6.1544L10.6929 1.06867L10.6913 1.06712Z" fill="#00C65E"/>
                                                </svg>
                                                : <svg width="24" height="22" viewBox="0 0 24 22" fill="red" xmlns="http://www.w3.org/2000/svg"><path d="M10.6913 1.06712C11.163 -0.355708 13.2114 -0.355708 13.6815 1.06712L15.3636 6.15286C15.4664 6.46259 15.6662 6.73246 15.9344 6.92391C16.2027 7.11536 16.5256 7.21858 16.8571 7.21882H22.2998C23.8232 7.21882 24.4552 9.13447 23.2242 10.015L18.8223 13.1573C18.5535 13.3489 18.3534 13.6193 18.2506 13.9295C18.1478 14.2398 18.1476 14.5741 18.25 14.8845L19.9322 19.9702C20.4038 21.3931 18.7453 22.578 17.5111 21.6974L13.1092 18.5551C12.8407 18.3636 12.5174 18.2604 12.1856 18.2604C11.8538 18.2604 11.5305 18.3636 11.262 18.5551L6.86009 21.6974C5.62755 22.578 3.97054 21.3931 4.44061 19.9702L6.12277 14.8845C6.22523 14.5741 6.22504 14.2398 6.12224 13.9295C6.01944 13.6193 5.8193 13.3489 5.55052 13.1573L1.15018 10.0166C-0.0807888 9.13601 0.552773 7.22037 2.07458 7.22037H7.51566C7.84745 7.22045 8.17076 7.11738 8.43931 6.92591C8.70786 6.73444 8.90788 6.46438 9.01074 6.1544L10.6929 1.06867L10.6913 1.06712Z" fill="#DADCDC"/>
                                                </svg>
                                        }
                                    </span>
                                    <span onClick={() => setStars(2)}>
                                         {stars >= 2 ?
                                             <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                                 <path d="M10.6913 1.06712C11.163 -0.355708 13.2114 -0.355708 13.6815 1.06712L15.3636 6.15286C15.4664 6.46259 15.6662 6.73246 15.9344 6.92391C16.2027 7.11536 16.5256 7.21858 16.8571 7.21882H22.2998C23.8232 7.21882 24.4552 9.13447 23.2242 10.015L18.8223 13.1573C18.5535 13.3489 18.3534 13.6193 18.2506 13.9295C18.1478 14.2398 18.1476 14.5741 18.25 14.8845L19.9322 19.9702C20.4038 21.3931 18.7453 22.578 17.5111 21.6974L13.1092 18.5551C12.8407 18.3636 12.5174 18.2604 12.1856 18.2604C11.8538 18.2604 11.5305 18.3636 11.262 18.5551L6.86009 21.6974C5.62755 22.578 3.97054 21.3931 4.44061 19.9702L6.12277 14.8845C6.22523 14.5741 6.22504 14.2398 6.12224 13.9295C6.01944 13.6193 5.8193 13.3489 5.55052 13.1573L1.15018 10.0166C-0.0807888 9.13601 0.552773 7.22037 2.07458 7.22037H7.51566C7.84745 7.22045 8.17076 7.11738 8.43931 6.92591C8.70786 6.73444 8.90788 6.46438 9.01074 6.1544L10.6929 1.06867L10.6913 1.06712Z" fill="#00C65E"/>
                                             </svg>
                                             : <svg width="24" height="22" viewBox="0 0 24 22" fill="red" xmlns="http://www.w3.org/2000/svg"><path d="M10.6913 1.06712C11.163 -0.355708 13.2114 -0.355708 13.6815 1.06712L15.3636 6.15286C15.4664 6.46259 15.6662 6.73246 15.9344 6.92391C16.2027 7.11536 16.5256 7.21858 16.8571 7.21882H22.2998C23.8232 7.21882 24.4552 9.13447 23.2242 10.015L18.8223 13.1573C18.5535 13.3489 18.3534 13.6193 18.2506 13.9295C18.1478 14.2398 18.1476 14.5741 18.25 14.8845L19.9322 19.9702C20.4038 21.3931 18.7453 22.578 17.5111 21.6974L13.1092 18.5551C12.8407 18.3636 12.5174 18.2604 12.1856 18.2604C11.8538 18.2604 11.5305 18.3636 11.262 18.5551L6.86009 21.6974C5.62755 22.578 3.97054 21.3931 4.44061 19.9702L6.12277 14.8845C6.22523 14.5741 6.22504 14.2398 6.12224 13.9295C6.01944 13.6193 5.8193 13.3489 5.55052 13.1573L1.15018 10.0166C-0.0807888 9.13601 0.552773 7.22037 2.07458 7.22037H7.51566C7.84745 7.22045 8.17076 7.11738 8.43931 6.92591C8.70786 6.73444 8.90788 6.46438 9.01074 6.1544L10.6929 1.06867L10.6913 1.06712Z" fill="#DADCDC"/>
                                             </svg>
                                         }
                                    </span>
                                  <span onClick={() => setStars(3)}>
                                       {stars >= 3 ?
                                           <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                               <path d="M10.6913 1.06712C11.163 -0.355708 13.2114 -0.355708 13.6815 1.06712L15.3636 6.15286C15.4664 6.46259 15.6662 6.73246 15.9344 6.92391C16.2027 7.11536 16.5256 7.21858 16.8571 7.21882H22.2998C23.8232 7.21882 24.4552 9.13447 23.2242 10.015L18.8223 13.1573C18.5535 13.3489 18.3534 13.6193 18.2506 13.9295C18.1478 14.2398 18.1476 14.5741 18.25 14.8845L19.9322 19.9702C20.4038 21.3931 18.7453 22.578 17.5111 21.6974L13.1092 18.5551C12.8407 18.3636 12.5174 18.2604 12.1856 18.2604C11.8538 18.2604 11.5305 18.3636 11.262 18.5551L6.86009 21.6974C5.62755 22.578 3.97054 21.3931 4.44061 19.9702L6.12277 14.8845C6.22523 14.5741 6.22504 14.2398 6.12224 13.9295C6.01944 13.6193 5.8193 13.3489 5.55052 13.1573L1.15018 10.0166C-0.0807888 9.13601 0.552773 7.22037 2.07458 7.22037H7.51566C7.84745 7.22045 8.17076 7.11738 8.43931 6.92591C8.70786 6.73444 8.90788 6.46438 9.01074 6.1544L10.6929 1.06867L10.6913 1.06712Z" fill="#00C65E"/>
                                           </svg>
                                           : <svg width="24" height="22" viewBox="0 0 24 22" fill="red" xmlns="http://www.w3.org/2000/svg"><path d="M10.6913 1.06712C11.163 -0.355708 13.2114 -0.355708 13.6815 1.06712L15.3636 6.15286C15.4664 6.46259 15.6662 6.73246 15.9344 6.92391C16.2027 7.11536 16.5256 7.21858 16.8571 7.21882H22.2998C23.8232 7.21882 24.4552 9.13447 23.2242 10.015L18.8223 13.1573C18.5535 13.3489 18.3534 13.6193 18.2506 13.9295C18.1478 14.2398 18.1476 14.5741 18.25 14.8845L19.9322 19.9702C20.4038 21.3931 18.7453 22.578 17.5111 21.6974L13.1092 18.5551C12.8407 18.3636 12.5174 18.2604 12.1856 18.2604C11.8538 18.2604 11.5305 18.3636 11.262 18.5551L6.86009 21.6974C5.62755 22.578 3.97054 21.3931 4.44061 19.9702L6.12277 14.8845C6.22523 14.5741 6.22504 14.2398 6.12224 13.9295C6.01944 13.6193 5.8193 13.3489 5.55052 13.1573L1.15018 10.0166C-0.0807888 9.13601 0.552773 7.22037 2.07458 7.22037H7.51566C7.84745 7.22045 8.17076 7.11738 8.43931 6.92591C8.70786 6.73444 8.90788 6.46438 9.01074 6.1544L10.6929 1.06867L10.6913 1.06712Z" fill="#DADCDC"/>
                                           </svg>
                                       }
                                  </span>
                                  <span onClick={() => setStars(4)}>
                                       {stars >= 4 ?
                                           <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                               <path d="M10.6913 1.06712C11.163 -0.355708 13.2114 -0.355708 13.6815 1.06712L15.3636 6.15286C15.4664 6.46259 15.6662 6.73246 15.9344 6.92391C16.2027 7.11536 16.5256 7.21858 16.8571 7.21882H22.2998C23.8232 7.21882 24.4552 9.13447 23.2242 10.015L18.8223 13.1573C18.5535 13.3489 18.3534 13.6193 18.2506 13.9295C18.1478 14.2398 18.1476 14.5741 18.25 14.8845L19.9322 19.9702C20.4038 21.3931 18.7453 22.578 17.5111 21.6974L13.1092 18.5551C12.8407 18.3636 12.5174 18.2604 12.1856 18.2604C11.8538 18.2604 11.5305 18.3636 11.262 18.5551L6.86009 21.6974C5.62755 22.578 3.97054 21.3931 4.44061 19.9702L6.12277 14.8845C6.22523 14.5741 6.22504 14.2398 6.12224 13.9295C6.01944 13.6193 5.8193 13.3489 5.55052 13.1573L1.15018 10.0166C-0.0807888 9.13601 0.552773 7.22037 2.07458 7.22037H7.51566C7.84745 7.22045 8.17076 7.11738 8.43931 6.92591C8.70786 6.73444 8.90788 6.46438 9.01074 6.1544L10.6929 1.06867L10.6913 1.06712Z" fill="#00C65E"/>
                                           </svg>
                                           : <svg width="24" height="22" viewBox="0 0 24 22" fill="red" xmlns="http://www.w3.org/2000/svg"><path d="M10.6913 1.06712C11.163 -0.355708 13.2114 -0.355708 13.6815 1.06712L15.3636 6.15286C15.4664 6.46259 15.6662 6.73246 15.9344 6.92391C16.2027 7.11536 16.5256 7.21858 16.8571 7.21882H22.2998C23.8232 7.21882 24.4552 9.13447 23.2242 10.015L18.8223 13.1573C18.5535 13.3489 18.3534 13.6193 18.2506 13.9295C18.1478 14.2398 18.1476 14.5741 18.25 14.8845L19.9322 19.9702C20.4038 21.3931 18.7453 22.578 17.5111 21.6974L13.1092 18.5551C12.8407 18.3636 12.5174 18.2604 12.1856 18.2604C11.8538 18.2604 11.5305 18.3636 11.262 18.5551L6.86009 21.6974C5.62755 22.578 3.97054 21.3931 4.44061 19.9702L6.12277 14.8845C6.22523 14.5741 6.22504 14.2398 6.12224 13.9295C6.01944 13.6193 5.8193 13.3489 5.55052 13.1573L1.15018 10.0166C-0.0807888 9.13601 0.552773 7.22037 2.07458 7.22037H7.51566C7.84745 7.22045 8.17076 7.11738 8.43931 6.92591C8.70786 6.73444 8.90788 6.46438 9.01074 6.1544L10.6929 1.06867L10.6913 1.06712Z" fill="#DADCDC"/>
                                           </svg>
                                       }
                                  </span>
                                  <span onClick={() => setStars(5)}>
                                      {stars >= 5 ?
                                          <svg width="24" height="22" viewBox="0 0 24 22" fill="none" xmlns="http://www.w3.org/2000/svg">
                                              <path d="M10.6913 1.06712C11.163 -0.355708 13.2114 -0.355708 13.6815 1.06712L15.3636 6.15286C15.4664 6.46259 15.6662 6.73246 15.9344 6.92391C16.2027 7.11536 16.5256 7.21858 16.8571 7.21882H22.2998C23.8232 7.21882 24.4552 9.13447 23.2242 10.015L18.8223 13.1573C18.5535 13.3489 18.3534 13.6193 18.2506 13.9295C18.1478 14.2398 18.1476 14.5741 18.25 14.8845L19.9322 19.9702C20.4038 21.3931 18.7453 22.578 17.5111 21.6974L13.1092 18.5551C12.8407 18.3636 12.5174 18.2604 12.1856 18.2604C11.8538 18.2604 11.5305 18.3636 11.262 18.5551L6.86009 21.6974C5.62755 22.578 3.97054 21.3931 4.44061 19.9702L6.12277 14.8845C6.22523 14.5741 6.22504 14.2398 6.12224 13.9295C6.01944 13.6193 5.8193 13.3489 5.55052 13.1573L1.15018 10.0166C-0.0807888 9.13601 0.552773 7.22037 2.07458 7.22037H7.51566C7.84745 7.22045 8.17076 7.11738 8.43931 6.92591C8.70786 6.73444 8.90788 6.46438 9.01074 6.1544L10.6929 1.06867L10.6913 1.06712Z" fill="#00C65E"/>
                                          </svg>
                                          : <svg width="24" height="22" viewBox="0 0 24 22" fill="red" xmlns="http://www.w3.org/2000/svg"><path d="M10.6913 1.06712C11.163 -0.355708 13.2114 -0.355708 13.6815 1.06712L15.3636 6.15286C15.4664 6.46259 15.6662 6.73246 15.9344 6.92391C16.2027 7.11536 16.5256 7.21858 16.8571 7.21882H22.2998C23.8232 7.21882 24.4552 9.13447 23.2242 10.015L18.8223 13.1573C18.5535 13.3489 18.3534 13.6193 18.2506 13.9295C18.1478 14.2398 18.1476 14.5741 18.25 14.8845L19.9322 19.9702C20.4038 21.3931 18.7453 22.578 17.5111 21.6974L13.1092 18.5551C12.8407 18.3636 12.5174 18.2604 12.1856 18.2604C11.8538 18.2604 11.5305 18.3636 11.262 18.5551L6.86009 21.6974C5.62755 22.578 3.97054 21.3931 4.44061 19.9702L6.12277 14.8845C6.22523 14.5741 6.22504 14.2398 6.12224 13.9295C6.01944 13.6193 5.8193 13.3489 5.55052 13.1573L1.15018 10.0166C-0.0807888 9.13601 0.552773 7.22037 2.07458 7.22037H7.51566C7.84745 7.22045 8.17076 7.11738 8.43931 6.92591C8.70786 6.73444 8.90788 6.46438 9.01074 6.1544L10.6929 1.06867L10.6913 1.06712Z" fill="#DADCDC"/>
                                          </svg>
                                      }
                                  </span>

                                </div>
                                <form className={'product__tabs-comment__popup-form'} onSubmit={handleSubmit(sendComment)}>
                                    <div className={'product__tabs-comment__popup-top'}>
                                        <div className={'product__tabs-comment__popup-labels'}>
                                            <label htmlFor="product__tabs-comment__popup-name">Имя</label>
                                            <input className={'product__tabs-comment__popup-input'} {...register('name')} id={'comment-name'} type="text"/>
                                        </div>
                                        <div className={'product__tabs-comment__popup-labels'}>
                                            <label className={'product__tabs-comment__popup-email'} htmlFor="comment-mail">E- mail</label>
                                            <input className={'product__tabs-comment__popup-input'}
                                                // required={true}
                                                   {...register('email')} id={'comment-mail'} type="email"/>
                                        </div>
                                    </div>

                                    <p className={'product__tabs-comment__popup-textarea'}>
                                        <label className={'product__tabs-comment__popup-comm'} htmlFor="comment-text">Оставить отзыв</label>
                                        <textarea className={'product__tabs-comment__popup-text'} maxLength={90} {...register('text')} id="comment-text" placeholder={'Отзыв'}/>
                                    </p>
                                    <button type={'submit'} className={'product__tabs-comment__popup-btn greenBtn'}>Отправить</button>
                                </form>
                            </div>
                        </>
                        : ''

                    }

                    <div className={'product__tabs-comment shadow-box'}>
                        <div className={'product__tabs-comment-top'}>
                            <img src={face} alt="face" className={'product__tabs-comment-img'}/>
                            <span>Юрий</span>
                            <span className={'product__tabs-comment-rate'}>
                        5
                        <span>
                            <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                 xmlns="http://www.w3.org/2000/svg"><path
                                d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                fill="#00C65E"/></svg>
                            <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                 xmlns="http://www.w3.org/2000/svg"><path
                                d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                fill="#00C65E"/></svg>
                            <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                 xmlns="http://www.w3.org/2000/svg"><path
                                d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                fill="#00C65E"/></svg>
                            <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                 xmlns="http://www.w3.org/2000/svg"><path
                                d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                fill="#00C65E"/></svg>
                            <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                 xmlns="http://www.w3.org/2000/svg"><path
                                d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                fill="#00C65E"/></svg>
                        </span>
                    </span>
                        </div>
                        <p className={'product__tabs-comment-date'}>16.05.2021</p>


                        <p className={'product__tabs-comment-text'}>
                            Перешла с айфона 7. Металась между XR и 11. Выбрала 11 и просто нарадоваться не могу.
                            Телефон
                            бомбезный,очень быстрый,мощный. Экран просто Вау! Больше не беспокоюсь о подзарядке.
                        </p>
                    </div>

                    {
                        product?.comments.length ?
                        product?.comments.map(item => (
                            <div key={item.id} className={'product__tabs-comment shadow-box'}>
                                <div className={'product__tabs-comment-top'}>
                                    <img src={face} alt="face" className={'product__tabs-comment-img'}/>
                                    <span>{item.name}</span>
                                    <span className={'product__tabs-comment-rate'}>
                                        {
                                            item.stars
                                        }
                                        {/*{emptyStars = 5 - item.stars}*/}
                        <span>
                            <span>
                                {
                                    item.stars >= 1 ?
                                        <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                             xmlns="http://www.w3.org/2000/svg"><path
                                            d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                            fill="#00C65E"/></svg>
                                        :  <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                                xmlns="http://www.w3.org/2000/svg"><path
                                            d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                            fill="#DADCDC"/></svg>
                                }
                            </span>
                            <span>
                                 {
                                     item.stars >= 2 ?
                                         <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                              xmlns="http://www.w3.org/2000/svg"><path
                                             d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                             fill="#00C65E"/></svg>
                                         :  <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                                 xmlns="http://www.w3.org/2000/svg"><path
                                             d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                             fill="#DADCDC"/></svg>
                                 }
                            </span>
                            <span>
                                {
                                    item.stars >= 3 ?
                                        <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                             xmlns="http://www.w3.org/2000/svg"><path
                                            d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                            fill="#00C65E"/></svg>
                                        :  <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                                xmlns="http://www.w3.org/2000/svg"><path
                                            d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                            fill="#DADCDC"/></svg>
                                }
                            </span>
                            <span>
                                 {
                                     item.stars >= 4 ?
                                         <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                              xmlns="http://www.w3.org/2000/svg"><path
                                             d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                             fill="#00C65E"/></svg>
                                         :  <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                                 xmlns="http://www.w3.org/2000/svg"><path
                                             d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                             fill="#DADCDC"/></svg>
                                 }
                            </span>
                            <span>
                                {
                                    item.stars >= 5 ?
                                        <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                             xmlns="http://www.w3.org/2000/svg"><path
                                            d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                            fill="#00C65E"/></svg>
                                        :  <svg width="12" height="11" viewBox="0 0 12 11" fill="none"
                                                xmlns="http://www.w3.org/2000/svg"><path
                                            d="M5.04629 0.635294C5.26319 -0.0190562 6.20526 -0.0190562 6.42144 0.635294L7.19506 2.97419C7.24232 3.11663 7.3342 3.24074 7.45756 3.32879C7.58092 3.41683 7.72944 3.46431 7.88191 3.46442H10.3849C11.0855 3.46442 11.3762 4.34541 10.8101 4.75038L8.78566 6.19549C8.66205 6.28361 8.57001 6.40793 8.52273 6.55063C8.47545 6.69332 8.47537 6.84706 8.52249 6.98981L9.2961 9.3287C9.513 9.98305 8.75023 10.528 8.18268 10.123L6.15827 8.6779C6.03478 8.5898 5.8861 8.54236 5.7335 8.54236C5.58091 8.54236 5.43222 8.5898 5.30874 8.6779L3.28433 10.123C2.7175 10.528 1.95545 9.98305 2.17163 9.3287L2.94524 6.98981C2.99237 6.84706 2.99228 6.69332 2.945 6.55063C2.89773 6.40793 2.80568 6.28361 2.68207 6.19549L0.658386 4.75109C0.0922745 4.34612 0.383645 3.46513 1.08351 3.46513H3.58582C3.73841 3.46517 3.8871 3.41776 4.01061 3.32971C4.13411 3.24165 4.2261 3.11745 4.2734 2.9749L5.04701 0.636004L5.04629 0.635294Z"
                                            fill="#DADCDC"/></svg>
                                }
                            </span>
                        </span>
                    </span>
                                </div>
                                <p className={'product__tabs-comment-date'}>16.05.2021</p>


                                <p className={'product__tabs-comment-text'}>
                                    {item.text}
                                </p>
                            </div>
                        )) : ''
                    }
                </div>
                <button className={'greenBtn product__tabs-comment-btn'} onClick={() => setOverlay(true)}>Оставить
                    отзыв
                </button>
            </div>


        </div>
    );
};

export default ProductTabsComment;